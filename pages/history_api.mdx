# History API

## Base URL

The base URL for all endpoints is: `https://api.omnilex.ai`

## Endpoints

### Search Results History

# Results History API

## Endpoint
`POST /results-history/search`

## Description
Search and retrieve user results history with pagination support.

## Request Body

```typescript
interface SearchResultsRequest {
  userEmails: string[];        // Required: List of user emails to search
  type?: OmnilexResultType;     // Optional: Filter by result type
  dateFrom?: Date;              // Optional: Filter from date
  dateTo?: Date;                // Optional: Filter to date
  page?: number;                // Optional: Page number (default: 1)
  pageSize?: number;            // Optional: Items per page (default: 10)
}
```

## Response

```typescript
interface SearchResultsResponse {
  results: OmnilexResult[];
  pagination: {
    currentPage: number;
    pageSize: number;
    totalPages: number;
    totalCount: number;
    hasNextPage: boolean;
    hasPreviousPage: boolean;
  }
}
```

## Examples

### Basic Search
```typescript
// Request
{
  "userEmails": ["user@example.com"]
}

// Response
{
  "results": [...],  // First 10 results
  "pagination": {
    "currentPage": 1,
    "pageSize": 10,
    "totalPages": 5,
    "totalCount": 50,
    "hasNextPage": true,
    "hasPreviousPage": false
  }
}
```

### With Pagination
```typescript
// Request
{
  "userEmails": ["user@example.com"],
  "page": 2,
  "pageSize": 20
}

// Response
{
  "results": [...],  // Items 21-40
  "pagination": {
    "currentPage": 2,
    "pageSize": 20,
    "totalPages": 3,
    "totalCount": 50,
    "hasNextPage": true,
    "hasPreviousPage": true
  }
}
```

### With Filters
```typescript
// Request
{
  "userEmails": ["user1@example.com", "user2@example.com"],
  "type": "thread",
  "dateFrom": "2024-01-01",
  "dateTo": "2024-12-31",
  "pageSize": 25
}
```

## Frontend Usage

```typescript
async function fetchResults(page: number = 1, pageSize: number = 20) {
  const response = await fetch('/api/results-history/search', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      userEmails: ['user@example.com'],
      page,
      pageSize
    })
  });

  const data = await response.json();
  
  // Access results and pagination
  console.log('Results:', data.results);
  console.log('Total count:', data.pagination.totalCount);
  console.log('Has more pages:', data.pagination.hasNextPage);
  
  return data;
}
```

## Notes
- Results are ordered by `updatedAt` timestamp (most recent update first)
- Pagination uses offset-based implementation internally
- All responses include pagination metadata
- Default page size is 10 items per page
